<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="application-name" content="StockWorks" />
    <meta name="theme-color" content="#ff4c92" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="StockWorks" />
    <title>StockWorks Inventory</title>
    <link rel="stylesheet" href="/static/styles.css" />
    <link rel="manifest" href="/static/site.webmanifest" />
    <link rel="apple-touch-icon" sizes="180x180" href="/static/icon-180.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/static/icon-192.png" />
  </head>
  <body>
    <header class="app-header">
      <div>
        <span class="brand-chip" aria-hidden="true">MakerWorks v2</span>
        <h1>StockWorks Inventory</h1>
        <p>Manage filament materials, inventory, stock movements, and pricing.</p>
      </div>
      <div class="header-actions">
        <button id="refresh-all" type="button">Refresh all data</button>
      </div>
    </header>

    <main class="app-grid">
      <div id="message" class="message" role="status" aria-live="polite"></div>

      <nav class="tab-nav" role="tablist" aria-label="Inventory sections">
        <button
          class="tab-button active"
          id="tab-materials"
          type="button"
          role="tab"
          aria-selected="true"
          aria-controls="materials-panel"
          data-tab-target="materials-panel"
        >
          Materials
        </button>
        <button
          class="tab-button"
          id="tab-inventory"
          type="button"
          role="tab"
          aria-selected="false"
          aria-controls="inventory-panel"
          data-tab-target="inventory-panel"
        >
          Inventory
        </button>
        <button
          class="tab-button"
          id="tab-hardware"
          type="button"
          role="tab"
          aria-selected="false"
          aria-controls="hardware-panel"
          data-tab-target="hardware-panel"
        >
          Hardware
        </button>
        <button
          class="tab-button"
          id="tab-movements"
          type="button"
          role="tab"
          aria-selected="false"
          aria-controls="movement-panel"
          data-tab-target="movement-panel"
        >
          Stock Movements
        </button>
      </nav>

      <div class="tab-panels">
        <section class="card tab-panel active" id="materials-panel" role="tabpanel" aria-labelledby="tab-materials">
        <div class="card-header">
          <div>
            <h2>Materials</h2>
            <p>Define filament attributes and default pricing.</p>
          </div>
          <div class="card-actions">
            <button id="material-clear" type="button">Clear form</button>
            <button id="material-refresh" type="button">Refresh list</button>
          </div>
        </div>
        <div class="card-body two-columns" id="materials-body">
          <form id="material-form" class="stack">
            <input type="hidden" id="material-id" />
            <label>
              Name
              <input type="text" id="material-name" required placeholder="PLA - Black" />
            </label>
            <label>
              Filament type
              <input type="text" id="material-type" required placeholder="PLA, PETG, ABS..." />
            </label>
            <label>
              Color
              <input type="text" id="material-color" required placeholder="Black" />
            </label>
            <label>
              Supplier
              <input type="text" id="material-supplier" placeholder="Optional" />
            </label>
            <label>
              Brand
              <input type="text" id="material-brand" placeholder="Optional" />
            </label>
            <label>
              Price per gram (USD)
              <input type="number" step="0.0001" min="0" id="material-price" required />
            </label>
            <label>
              Spool weight (grams)
              <input type="number" min="1" id="material-spool" required />
            </label>
            <label class="full-width">
              Notes
              <textarea id="material-notes" rows="3" placeholder="Special handling, storage tips..."></textarea>
            </label>
            <div class="form-actions">
              <button type="submit">Save material</button>
              <button type="button" id="material-delete" class="danger">Delete</button>
            </div>
          </form>

          <div class="table-wrapper">
            <table id="materials-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Type</th>
                  <th>Color</th>
                  <th>Price/g</th>
                  <th>Spool (g)</th>
                  <th>Supplier</th>
                  <th>Brand</th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
        </section>

        <section class="card tab-panel" id="inventory-panel" role="tabpanel" aria-labelledby="tab-inventory" hidden>
        <div class="card-header">
          <div>
            <h2>Inventory</h2>
            <p>Track spool locations, quantities, and reorder points.</p>
          </div>
          <div class="card-actions">
            <button id="inventory-clear" type="button">Clear form</button>
            <button id="inventory-refresh" type="button">Refresh list</button>
          </div>
        </div>
        <div class="card-body two-columns" id="inventory-body">
          <form id="inventory-form" class="stack">
            <input type="hidden" id="inventory-id" />
            <label>
              Material
              <select id="inventory-material" required>
                <option value="">Select material...</option>
              </select>
            </label>
            <label>
              Location
              <input type="text" id="inventory-location" required placeholder="Rack A - Bin 1" />
            </label>
            <label>
              Quantity (grams)
              <input type="number" min="0" step="0.01" id="inventory-quantity" required />
            </label>
            <label>
              Reorder level (grams)
              <input type="number" min="0" step="0.01" id="inventory-reorder" required />
            </label>
            <label>
              Spool serial
              <input type="text" id="inventory-serial" placeholder="Optional" />
            </label>
            <label>
              Unit cost override
              <input type="number" min="0" step="0.0001" id="inventory-cost" placeholder="Optional" />
            </label>
            <div class="form-actions">
              <button type="submit">Save inventory</button>
              <button type="button" id="inventory-delete" class="danger">Delete</button>
            </div>
          </form>
          <div class="table-wrapper">
            <table id="inventory-table">
              <thead>
                <tr>
                  <th>Material</th>
                  <th>Location</th>
                  <th>Qty (g)</th>
                  <th>Reorder</th>
                  <th>Serial</th>
                  <th>Unit cost</th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
        </section>

        <section class="card tab-panel" id="hardware-panel" role="tabpanel" aria-labelledby="tab-hardware" hidden>
        <div class="card-header">
          <div>
            <h2>Hardware Components</h2>
            <p>Track magnets, inserts, screws, and other non-filament supplies.</p>
          </div>
          <div class="card-actions">
            <button id="hardware-clear" type="button">Clear form</button>
            <button id="hardware-refresh" type="button">Refresh list</button>
          </div>
        </div>
        <div class="card-body" id="hardware-body">
          <div class="two-columns">
            <form id="hardware-form" class="stack">
              <input type="hidden" id="hardware-id" />
              <label>
                Name
                <input type="text" id="hardware-name" required placeholder="Neodymium Magnet 6x3 mm" />
              </label>
              <label>
                Category
                <input type="text" id="hardware-category" placeholder="Magnets, Inserts, Screws..." />
              </label>
              <label>
                Supplier
                <input type="text" id="hardware-supplier" placeholder="Optional" />
              </label>
              <label>
                Manufacturer / Part #
                <input type="text" id="hardware-mpn" placeholder="Optional part number" />
              </label>
              <label>
                Unit of measure
                <input type="text" id="hardware-unit" placeholder="piece, set, pack..." />
              </label>
              <label>
                Unit cost (USD)
                <input type="number" step="0.01" min="0" id="hardware-unit-cost" placeholder="Optional" />
              </label>
              <label>
                Quantity on hand
                <input type="number" step="0.01" min="0" id="hardware-quantity" required />
              </label>
              <label>
                Reorder level
                <input type="number" step="0.01" min="0" id="hardware-reorder" />
              </label>
              <label>
                Bin / location
                <input type="text" id="hardware-bin" placeholder="Rack B - Bin 4" />
              </label>
              <label class="full-width">
                Notes
                <textarea id="hardware-notes" rows="3" placeholder="Packaging info, supplier link..."></textarea>
              </label>
              <div class="form-actions">
                <button type="submit">Save hardware</button>
                <button type="button" id="hardware-delete" class="danger">Delete</button>
              </div>
            </form>
            <div class="table-wrapper">
              <table id="hardware-table">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Unit</th>
                    <th>Qty</th>
                    <th>Reorder</th>
                    <th>Unit cost</th>
                    <th>Location</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
          <div class="hardware-movements-grid">
            <form id="hardware-movement-form" class="stack">
              <label>
                Hardware item
                <select id="hardware-movement-item" required>
                  <option value="">Select hardware item...</option>
                </select>
              </label>
              <label>
                Movement type
                <select id="hardware-movement-type">
                  <option value="incoming">Incoming</option>
                  <option value="outgoing">Outgoing</option>
                  <option value="adjustment">Adjustment</option>
                </select>
              </label>
              <label>
                Change (units)
                <input type="number" step="0.01" id="hardware-movement-change" required />
              </label>
              <label>
                Reference
                <input type="text" id="hardware-movement-reference" placeholder="PO-55, JOB-1021..." />
              </label>
              <label>
                Note
                <input type="text" id="hardware-movement-note" placeholder="Optional comment" />
              </label>
              <button type="submit">Log hardware movement</button>
            </form>
            <div class="table-wrapper">
              <table id="hardware-movement-table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Type</th>
                    <th>Change</th>
                    <th>Reference</th>
                    <th>Note</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td colspan="5" class="muted">Select a hardware item to view history.</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        </section>

        <section class="card tab-panel" id="movement-panel" role="tabpanel" aria-labelledby="tab-movements" hidden>
        <div class="card-header">
          <div>
            <h2>Stock Movements</h2>
            <p>Log usage, receipts, or adjustments, and view history.</p>
          </div>
        </div>
        <div class="card-body two-columns" id="movement-body">
          <form id="movement-form" class="stack">
            <label>
              Inventory item
              <select id="movement-inventory" required>
                <option value="">Select inventory item...</option>
              </select>
            </label>
            <label>
              Movement type
              <select id="movement-type">
                <option value="incoming">Incoming</option>
                <option value="outgoing">Outgoing</option>
                <option value="adjustment">Adjustment</option>
              </select>
            </label>
            <label>
              Change (grams)
              <input type="number" step="0.01" id="movement-change" required />
            </label>
            <label>
              Reference
              <input type="text" id="movement-reference" placeholder="JOB-1001, PO-55..." />
            </label>
            <label>
              Note
              <input type="text" id="movement-note" placeholder="Optional comment" />
            </label>
            <button type="submit">Log movement</button>
          </form>
          <div class="table-wrapper">
            <table id="movement-table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Type</th>
                  <th>Change (g)</th>
                  <th>Reference</th>
                  <th>Note</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="5" class="muted">Select an inventory item to view history.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        </section>
      </div>
    </main>

    <script type="module" src="/static/app.js"></script>
  </body>
</html>
